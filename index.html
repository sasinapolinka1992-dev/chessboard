<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Прототип — Шахматка (Массовые изменения)</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
      <header class="topbar">
      <h1>Шахматка — Массовые изменения</h1>
      <div class="top-actions">
        <label class="toggle" aria-label="Переключатель: Показывать только свободные">
          <input id="freeOnly" type="checkbox" checked>
          <span class="switch"></span>
          <span class="label">Показывать только свободные</span>
        </label>
      </div>
    </header>

    <main class="container">
      <div class="info-banner" id="infoBanner" style="display:none">
        <div class="info-content">
          <strong id="infoTitle">Режим</strong>
          <div id="infoText">Инструкция по работе в режиме появится здесь.</div>
        </div>
        <div class="info-actions">
          <button class="btn primary" id="infoDone">Готово</button>
          <button class="btn" id="infoCancel">Отмена</button>
        </div>
      </div>
      <section class="toolbar">
        <div class="left">
          <button class="btn primary" id="btn-move" title="Перемещение — выберите элемент(ы), затем цель вставки. Для отмены — 'Отмена'" aria-label="Кнопка Переместить">Переместить</button>
          <button class="btn" id="btn-copy" title="Копировать — выберите источник и цель вставки; номера обновляются автоматически" aria-label="Кнопка Копировать">Копировать</button>
          <button class="btn" id="btn-edit" title="Массовое изменение — выберите помещения и задайте параметры в модальном окне" aria-label="Кнопка Изменить">Изменить</button>
          <button class="btn danger" id="btn-delete" title="Удалить — выделите помещения и подтвердите удаление" aria-label="Кнопка Удалить">Удалить</button>
          <button class="btn" id="btn-logs" title="Открыть журнал действий — история операций" aria-label="Кнопка Логи">Логи действий</button>
        </div>
        <div class="right">
          <div class="dropdown">
            <button class="btn" id="displayModeBtn">Показать: Номер ▾</button>
            <div class="dropdown-menu" id="displayModeMenu">
              <div data-mode="number" class="dropdown-item">Номер</div>
              <div data-mode="area" class="dropdown-item">Площадь</div>
              <div data-mode="rooms" class="dropdown-item">Комнатность</div>
            </div>
          </div>

          <button class="btn primary" id="btn-recount" title="Пересчитать номера помещений автоматически" aria-label="Кнопка Пересчитать номера">Пересчитать номера</button>
          <button class="btn" id="btn-save" style="display:none" title="Сохранить изменения" aria-label="Кнопка Сохранить">Сохранить</button>
          <button class="btn" id="btn-scn-delete" title="Пример сценария: Удаление">Пример: Удаление</button>
          <button class="btn" id="btn-scn-copy" title="Пример сценария: Копирование">Пример: Копирование</button>
        </div>
      </section>

      <section class="chessboard-wrap">
        <div class="chess-controls">
          <button class="small" id="addColTop" title="Добавить стояк сверху">+ сверху</button>
          <button class="small" id="addRowLeft" title="Добавить этаж слева">+ этаж</button>
          <button class="small" id="addColRight" title="Добавить секцию справа">+ секция</button>
        </div>

        <div class="chessboard" id="chessboard" aria-label="Шахматка">
          <!-- grid rendered by JS -->
        </div>

        <div id="zone-cancel" class="zone" title="Зона отмены: перетащите сюда, чтобы отменить действие">Зона отмены</div>

        <div class="annotation">Наведите на элементы для подсказок. Клик — выделить.</div>
      </section>

      <section class="hintbar" id="hintbar">Выберите помещения, затем нажмите 'Удалить'. Для отмены — 'Отмена'.</section>
    </main>

    <!-- slides/modals as separate screens -->
    <div class="slides" id="slides">
      <div class="slide" id="slide-main">
        <!-- main slide is index view -->
      </div>

      <div class="slide" id="slide-add" aria-hidden="true">
        <div class="modal left">
          <h2>Добавить помещения — Параметры</h2>
          <div class="form-row"><label>Статус:</label><select id="add-status"><option>Свободно</option><option>Продано</option></select></div>
          <div class="form-row"><label>Площадь (м²):</label><input id="add-area" type="text" value="45"></div>
          <div class="form-row"><label>Номер (префикс):</label><input id="add-number" type="text" value="10"></div>
          <p class="helper" style="font-size:13px;color:#7F7F7E;margin-top:8px">Примечание: указанные параметры применяются к создаваемым помещениям. Номер можно изменить вручную после сохранения.</p>
          <div class="modal-actions"><button class="btn primary" id="add-save">Сохранить</button><button class="btn" id="add-cancel">Отменить</button></div>
        </div>
      </div>

      <div class="slide" id="slide-confirm" aria-hidden="true">
        <div class="modal center">
          <h2>Подтвердите изменения</h2>
          <p id="confirm-text">Вы уверены, что хотите сохранить изменения? Проверьте корректность данных.</p>
          <p id="confirm-count" style="font-weight:600;margin-top:6px">[Кол-во] помещений будет изменено.</p>
          <p style="font-size:13px;color:#7F7F7E;margin-top:6px">Если вы перейдёте в другой раздел без сохранения — изменения будут утеряны.</p>
          <div class="modal-actions"><button class="btn primary" id="confirm-yes">Подтвердить</button><button class="btn" id="confirm-no">Отменить</button></div>
        </div>
      </div>

      <div class="slide" id="slide-logs" aria-hidden="true">
        <div class="modal right">
          <h2>Логи действий</h2>
          <div class="log-list" id="logList">
            <!-- logs by JS -->
          </div>
          <div class="modal-actions"><button class="btn" id="logs-close">Закрыть</button></div>
        </div>
      </div>

      <div class="slide" id="slide-scenario-delete" aria-hidden="true">
        <div class="modal center">
          <h2>Сценарий: Удаление (демо)</h2>
          <ol>
            <li>Активировать режим удаления</li>
            <li>Выделить несколько помещений (клик / лассо)</li>
            <li>Нажать «Удалить» — открыть подтверждение</li>
            <li>Подтвердить удаление</li>
          </ol>
          <div class="modal-actions">
            <button class="btn" id="scn-delete-step1">Шаг 1: Включить режим удаления</button>
            <button class="btn" id="scn-delete-step2">Шаг 2: Выделить примеры</button>
            <button class="btn primary" id="scn-delete-step3">Шаг 3: Удалить (показать подтверждение)</button>
            <button class="btn" id="scn-delete-close">Закрыть</button>
            <div class="slide-nav">
              <button class="btn ghost" id="scn-delete-prev">← Назад</button>
              <button class="btn ghost" id="scn-delete-next">Далее →</button>
            </div>
          </div>
        </div>
      </div>

      <div class="slide" id="slide-scenario-copy" aria-hidden="true">
        <div class="modal center">
          <h2>Сценарий: Копирование (демо)</h2>
          <ol>
            <li>Выделить помещение/стояк</li>
            <li>Выбрать цель вставки</li>
            <li>Подтвердить копирование</li>
          </ol>
          <div class="modal-actions">
            <button class="btn" id="scn-copy-step1">Шаг 1: Активировать копирование</button>
            <button class="btn" id="scn-copy-step2">Шаг 2: Выбрать цель</button>
            <button class="btn primary" id="scn-copy-step3">Шаг 3: Подтвердить (показать подтверждение)</button>
            <button class="btn" id="scn-copy-close">Закрыть</button>
            <div class="slide-nav">
              <button class="btn ghost" id="scn-copy-prev">← Назад</button>
              <button class="btn ghost" id="scn-copy-next">Далее →</button>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="overlay" id="overlay" aria-hidden="true"></div>

    <footer class="footer">
      <div>Прототип — имитация кликов, модалей и drag&drop. Mobile: меню сворачивается.</div>
    </footer>
  </div>

<script src="app.js"></script>
</body>
</html>
