*{box-sizing:border-box}html,body{height:100%}body{font-family:Roboto, Arial, sans-serif;margin:0;background:#F7F8FA;color:#333;line-height:1.6;-webkit-font-smoothing:antialiased}
.app{max-width:1200px;margin:20px auto;padding:20px;background:#fff;border:1px solid #DDD;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,0.05)}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.topbar h1{font-size:24px;color:#7F7F7E;margin:0 0 0 0}
.container{padding:0}
.toolbar{display:flex;justify-content:space-between;align-items:center;padding:10px 0;margin-bottom:10px}
.btn{padding:8px 12px;margin-right:8px;border-radius:6px;border:1px solid #DDD;background:#fff;color:#333;cursor:pointer}
.btn:hover{box-shadow:0 4px 12px rgba(105,153,204,0.12);border-color:#69C}
.btn.primary{background:#69C;color:#fff;border-color:#69C}
.btn.danger{background:#fff;border:1px solid #f2a0a0;color:#c33}
.small{padding:6px 8px;border-radius:6px;border:1px solid #DDD;background:#fff}
.dropdown{position:relative;display:inline-block}
.dropdown-menu{position:absolute;right:0;top:36px;background:#fff;border:1px solid #DDD;border-radius:6px;display:none;min-width:150px;box-shadow:0 2px 8px rgba(0,0,0,0.05)}
.dropdown-item{padding:8px 12px;cursor:pointer}
.dropdown-item:hover{background:#EAEAEA}
.chessboard-wrap{padding:20px;border-radius:6px;border:1px solid #DDD;background:#FFFFFF;box-shadow:0 2px 8px rgba(0,0,0,0.05)}
.chess-controls{display:flex;gap:8px;margin-bottom:10px}
.chessboard{overflow:auto;border-radius:6px;padding:10px;background:#fff}
.grid{display:grid;gap:10px}
.cell{width:120px;height:80px;background:#FFF;border:1px solid #DDD;border-radius:6px;padding:8px;position:relative;box-shadow:0 1px 4px rgba(0,0,0,0.03);cursor:pointer}
.cell.free{border-color:#69C}
.cell.sold{opacity:0.6}
.cell .meta{font-size:12px;color:#7F7F7E}
.cell .main{font-weight:600;font-size:15px;color:#333}
.cell.selected{outline:2px dashed #69C}
.headerCell{background:#EAEAEA;padding:10px;border-radius:6px;border:1px solid #DDD;color:#333;font-weight:600}
.sideCell{background:#EAEAEA;padding:10px;border-radius:6px;border:1px solid #DDD;color:#333;font-weight:600}
.annotation{margin-top:8px;color:#7F7F7E;font-size:13px}
.hintbar{margin-top:12px;padding:10px;background:#fff;border-radius:6px;border:1px dashed #EAEAEA;color:#333}
.footer{margin-top:12px;color:#7F7F7E;font-size:13px}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.25);display:none}
.slides .slide{display:none}
.slides .slide.active{display:block}
.modal{background:#FFFFFF;border-radius:6px;padding:20px;border:1px solid #DDD;box-shadow:0 2px 20px rgba(0,0,0,0.06)}
.modal.left{position:fixed;left:20px;top:80px;width:360px}
.modal.center{position:fixed;left:50%;top:30%;transform:translateX(-50%);width:420px}
.modal.right{position:fixed;right:20px;top:80px;width:360px}
.modal h2{font-size:18px;color:#7F7F7E;margin:0 0 15px}
.modal .form-row{display:flex;justify-content:space-between;margin-bottom:10px}
.modal .form-row label{width:40%}
.modal .modal-actions{text-align:right;margin-top:12px}
.log-list{max-height:240px;overflow:auto;padding:8px;border:1px solid #EAEAEA;border-radius:6px}
@media (max-width:700px){
  .cell{width:80px;height:64px;font-size:13px}
  .app{margin:10px}
  .topbar h1{font-size:18px}
  .toolbar{flex-direction:column;align-items:flex-start;gap:8px}
  .modal.left,.modal.right{position:static;width:auto;margin:10px}
}

/* Annotations / arrows / highlights for scenarios */
.zone{position:absolute;right:20px;top:120px;padding:8px 10px;border-radius:6px;border:1px dashed #69C;background:rgba(105,153,204,0.06);color:#69C;font-weight:600}
.step-arrow{position:fixed;height:6px;background:#69C;border-radius:6px;transform-origin:left center;z-index:9998;opacity:0}
.step-arrow.head{height:8px}
.pulse{animation:pulse 900ms ease-in-out 3}
@keyframes pulse{0%{transform:scale(1);box-shadow:0 0 0 0 rgba(105,153,204,0.08)}50%{transform:scale(1.03);box-shadow:0 0 0 10px rgba(105,153,204,0.06)}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(105,153,204,0.0)}}

/* arrow head as small circle */
.arrow-head{position:fixed;width:10px;height:10px;border-radius:50%;background:#69C;z-index:9999;opacity:0}

.cell.changed{box-shadow:0 0 0 2px rgba(105,153,204,0.3) inset}

/* Slide transitions */
.slides .slide{position:fixed;inset:0;display:flex;align-items:flex-start;justify-content:center;opacity:0;transform:translateX(30px);transition:opacity .32s ease, transform .32s ease;pointer-events:none}
.slides .slide.active{opacity:1;transform:translateX(0);pointer-events:auto}
.slides .slide.from-right{opacity:0;transform:translateX(30px)}
.slides .slide.to-left{opacity:0;transform:translateX(-30px)}

.slide-nav{display:flex;gap:8px;margin-top:12px}
.btn.ghost{background:transparent;border:1px solid #EAEAEA;color:#333}
